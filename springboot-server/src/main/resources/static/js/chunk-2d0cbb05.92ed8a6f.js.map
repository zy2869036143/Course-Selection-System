{"version":3,"sources":["webpack:///./src/components/CourseChose.vue","webpack:///./src/components/CourseChose.vue?b0f8"],"names":["inline","model","formInline","class","label","property","placeholder","value","name","teacher","weekday","section","id","type","onSubmit","style","drawer","title","with-header","data","myCourse","border","prop","width","fixed","default","size","erase","mine","$index","tableData","handleClick","scope","prePage","nextPage","warn","showClose","message","success","cid","fail","error","nextNoContent","computed","this","getCourses","getMyCourse","response","begin","end","a","count","methods","numberMillis","now","Date","exitTime","getTime","username","then","res","i","push","index","row","sleep","courseid","p1","length","timelist","split","p","tls","s","infor","hastime","alert","includes","render"],"mappings":"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","file":"js/chunk-2d0cbb05.92ed8a6f.js","sourcesContent":["<template>\r\n  <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n    <el-form-item label=\"课程性质\">\r\n      <el-select v-model=\"formInline.property\" placeholder=\"性质\">\r\n        <el-option label=\"全部\" value=\"\"></el-option>\r\n        <el-option label=\"必修\" value=\"必修\"></el-option>\r\n        <el-option label=\"限选\" value=\"限选\"></el-option>\r\n        <el-option label=\"选修\" value=\"任选\"></el-option>\r\n      </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"课程名\">\r\n      <el-input v-model=\"formInline.name\" placeholder=\"课序号\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"授课教师\">\r\n        <el-input v-model=\"formInline.teacher\" placeholder=\"教师\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"授课星期\">\r\n        <el-select v-model=\"formInline.weekday\" placeholder=\"星期\">\r\n            <el-option label=\"取消\" value=\"0\"></el-option>\r\n            <el-option label=\"星期一\" value=\"1\"></el-option>\r\n            <el-option label=\"星期二\" value=\"2\"></el-option>\r\n            <el-option label=\"星期三\" value=\"3\"></el-option>\r\n            <el-option label=\"星期四\" value=\"4\"></el-option>\r\n            <el-option label=\"星期五\" value=\"5\"></el-option>\r\n            <el-option label=\"星期六\" value=\"6\"></el-option>\r\n            <el-option label=\"星期日\" value=\"7\"></el-option>\r\n        </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"授课节次\">\r\n        <el-select v-model=\"formInline.section\" placeholder=\"节次\">\r\n            <el-option label=\"取消\" value=\"0\"></el-option>\r\n            <el-option label=\"第一大节\" value=\"1\"></el-option>\r\n            <el-option label=\"第二大节\" value=\"2\"></el-option>\r\n            <el-option label=\"第三大节\" value=\"3\"></el-option>\r\n            <el-option label=\"第四大节\" value=\"4\"></el-option>\r\n            <el-option label=\"第五大节\" value=\"5\"></el-option>\r\n        </el-select>\r\n    </el-form-item>\r\n    <el-form-item label=\"课序号\">\r\n      <el-input v-model=\"formInline.id\" placeholder=\"课序号\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-button type=\"primary\" @click=\"onSubmit\">查询</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n\r\n\r\n  <el-button type=\"success\" style=\"margin-left: 10px; size: 20px\" @click=\"drawer = true\">\r\n    已选课程\r\n  </el-button>\r\n\r\n  <el-drawer v-model=\"drawer\" title=\"我的选课课程\" :with-header=\"false\">\r\n    <el-table :data=\"myCourse\" border style=\"width: 1620px\">\r\n    <el-table-column prop=\"id\" label=\"课序号\" width=\"100\" />\r\n    <el-table-column prop=\"name\" label=\"课程名\" width=\"100\" />\r\n    <el-table-column prop=\"teacher\" label=\"教师\" width=\"100\" />\r\n    <el-table-column prop=\"time\" label=\"时间\" width=\"100\" />\r\n    <el-table-column prop=\"place\" label=\"地点\" width=\"100\" />\r\n    <el-table-column prop=\"credit\" label=\"学分\" width=\"50\" />\r\n    <el-table-column prop=\"property\" label=\"课程性质\" width=\"100\" />\r\n    <el-table-column fixed=\"right\" label=\"操作\" width=\"100\">\r\n      <template #default=\"mine\">\r\n        <el-button type=\"text\" size=\"big\"  @click.prevent=\"erase(mine.$index, myCourse)\">退课</el-button>\r\n      </template>\r\n    </el-table-column> \r\n  </el-table>\r\n  </el-drawer>\r\n\r\n  <el-table :data=\"tableData\" border style=\"width: 1360px;\">\r\n    <el-table-column prop=\"sequence\" label=\"标号\" width=\"100\"></el-table-column>\r\n    <el-table-column prop=\"id\" label=\"课序号\" width=\"200\" />\r\n    <el-table-column prop=\"name\" label=\"课程名\" width=\"200\" />\r\n    <el-table-column prop=\"teacher\" label=\"教师\" width=\"100\" />\r\n    <el-table-column prop=\"time\" label=\"时间\" width=\"100\" />\r\n    <el-table-column prop=\"place\" label=\"地点\" width=\"200\" />\r\n    <el-table-column prop=\"credit\" label=\"学分\" width=\"100\" />\r\n    <el-table-column prop=\"property\" label=\"课程性质\" width=\"100\" />\r\n    <el-table-column prop=\"remain\" label=\"剩余容量\" width=\"130\" />\r\n    <el-table-column fixed=\"right\" label=\"操作\" width=\"120\">\r\n      <template #default=\"scope\">\r\n        <el-button type=\"text\" size=\"big\"\r\n         @click.prevent=\"handleClick(scope.$index, tableData)\">选课</el-button>\r\n      </template>\r\n    </el-table-column> \r\n      </el-table>   \r\n   <el-button-group style=\"padding-left: 1196px\">\r\n    <el-button type=\"primary\" @click=\"prePage\">上一页</el-button>\r\n    <el-button type=\"primary\" @click=\"nextPage\">下一页</el-button>\r\n  </el-button-group>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {getAllCourses} from '../service/genServ.js'\r\nimport { ref } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport {postCourse} from '../service/genServ.js'\r\nimport {eraseCourse} from '../service/genServ.js'\r\nimport {getmine} from '../service/genServ.js'\r\nimport { mapState } from 'vuex'\r\n\r\nexport default {\r\n  name: 'CourseChose',\r\n  setup() {\r\n   // 当用户没有同时查询星期和节次时\r\n    const warn = () => {\r\n      ElMessage({\r\n        showClose: true,\r\n        message: '上课星期和节次必须同时选择',\r\n        type: 'warning',\r\n      })\r\n    }\r\n    // 用户选课成功，消息提醒\r\n    const success = (cid) => {\r\n      ElMessage({\r\n        message: cid,\r\n        type: 'success',\r\n      })\r\n    }\r\n    // 用户选课失败，消息提醒\r\n    const fail = (cid) => {\r\n      ElMessage.error('选课失败。\\n'+cid)\r\n    }\r\n    // 当用户点击下一页按钮，而下一页已经没有内容时\r\n    const nextNoContent = () => {\r\n      ElMessage('下一页已无内容')\r\n    }\r\n    return { \r\n      nextNoContent,\r\n      warn,\r\n      success,\r\n      fail,\r\n      drawer: ref(false),\r\n    }\r\n  },\r\n  // 计算属性\r\n  computed: {\r\n    ...mapState([\r\n      'username', 'jwtToken'\r\n    ])\r\n  },\r\n  // 页面初加载调用方法\r\n  created() {\r\n      this.getCourses();\r\n      this.getMyCourse();\r\n  },\r\n  data() {\r\n    return {\r\n      // 所有课程的信息, 这是一个字典形式的，因为服务器返回的是一个字典，虽然此处定义为数组，后续会被覆盖\r\n      response: [],\r\n      // 我已选课的信息，是一个数组\r\n      myCourse: [],\r\n      begin: 0,\r\n      end : 0,\r\n      a: '',\r\n      count : 10,    // 一页最多展示多少条课程信息\r\n      tableData: [\r\n          // {\r\n          //   sequence: '1',\r\n          //   id: '2',\r\n          //   name: '3',\r\n          //   teacher: '4',\r\n          //   place: 's周三第四大节: 4去；周五',\r\n          //   credit: '6',\r\n          //   property: '7',\r\n          //   capacity: '8',\r\n          //   op: \"选课\"\r\n          // },\r\n      ],\r\n       formInline: {\r\n        id: '',\r\n        name: '',\r\n        property: '',\r\n        teacher: '',\r\n        weekday: '',\r\n        section: '',\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    sleep(numberMillis) { \r\n      var now = new Date(); \r\n      var exitTime = now.getTime() + numberMillis; \r\n      while (now.getTime() < exitTime) { \r\n          now = new Date();\r\n      } \r\n    },\r\n    // 获取学生已经选择的课程\r\n    getMyCourse(){\r\n        // 清空\r\n        this.myCourse=[];\r\n        getmine(this.username).then(res => {\r\n          // (判断字典下一项是否为空千万不能用!==,只能用!=)\r\n          for(var i=0; res[i+'']!=null;++i){\r\n            this.myCourse.push(res[i+'']);\r\n          }\r\n        })\r\n    },\r\n    // 退课操作\r\n    erase(index, row){\r\n      //alert(row[index]['id']);\r\n      eraseCourse(row[index]['id'], this.username, 'erase').then(res =>{\r\n        if(res=='success'){\r\n          this.success(\"退课成功。课序号:\"+row[index]['id']+\" 课程名:\"+row[index]['name']);\r\n        }\r\n      })\r\n      this.sleep(100);\r\n      getAllCourses().then(res => {\r\n        this.response = res;\r\n        this.tableData=[];\r\n        for (var i=this.begin; i<this.end ;++i){\r\n          this.tableData.push(this.response[i+'']);\r\n        }\r\n      })\r\n      this.getMyCourse();\r\n    },\r\n    // 选课操作\r\n    handleClick(index, row){\r\n      this.a= row;\r\n      // 判断是否是同一门课程\r\n      var courseid = row[index]['id'];\r\n      for (var p1=0; p1< this.myCourse.length;++p1){\r\n        if(courseid==this.myCourse[p1]['id']){\r\n          this.fail(\"此课已选\");\r\n          return;\r\n        }\r\n      }\r\n      // 判断时间是否冲突\r\n      // 当前点击的课程的时间信息\r\n      var timelist = row[index]['time'].split(\";\");\r\n      for (var i=1;timelist[i]!=null;++i){\r\n        for (var p=0; p< this.myCourse.length;++p){\r\n          var tls = this.myCourse[p]['time'].split(\";\");\r\n          for(var s=1;tls[s]!=null;++s ){\r\n            if(tls[s]==timelist[i]){  \r\n              this.fail(\"与已选课程“\"+this.myCourse[p]['name']+\"”时间冲突\")\r\n              return;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      postCourse(row[index]['id'], this.username).then(res =>{\r\n          if(res=='success'){\r\n            this.success(\"选课成功。课序号:\"+row[index]['id']+\" 课程名:\"+row[index]['name']);\r\n          }else{\r\n            this.fail(\"课余量为0。课序号:\"+row[index]['id']+\" 课程名:\"+row[index]['name']);\r\n          }\r\n      })\r\n      // 用户点击选课后，更新本地课程信息以和服务器端同步\r\n      // 但是需要稍等一下再执行，因为更新数据操作比较耗时。\r\n      this.sleep(100);\r\n      getAllCourses().then(res => {\r\n        this.response = res;\r\n        this.tableData=[];\r\n        for (var i=this.begin; i<this.end ;++i){\r\n          this.tableData.push(this.response[i+'']);\r\n        }\r\n      })\r\n      // 更新用户已经选择的课程\r\n      this.getMyCourse();\r\n    },\r\n    // 下一页方法\r\n    nextPage(){\r\n      if (this.response[this.end+'']==null) {this.nextNoContent(); return;}\r\n      this.begin+=this.count;\r\n      this.tableData=[];\r\n      for (var i=this.begin; this.response[i+'']!=null && i<this.begin+this.count ;++i){\r\n        this.tableData.push(this.response[i+'']);\r\n        this.end = i+1;\r\n      }\r\n    },\r\n    // 上一页方法\r\n    prePage(){\r\n      if(this.begin-this.count<0)  {this.begin=this.count;}\r\n      this.begin -= this.count;\r\n      this.end -= this.count;\r\n      this.tableData=[];\r\n      for (var i=this.begin; this.response[i+'']!=null && i<this.begin+this.count;++i){\r\n        this.tableData.push(this.response[i+'']);\r\n        this.end=i+1;\r\n      }\r\n    },\r\n    // 根据行內表单查询课程\r\n    onSubmit(){     \r\n      if ((this.formInline.weekday==\"0\" || this.formInline.weekday==\"\" ) != (this.formInline.section==\"0\" || this.formInline.section==\"\")){\r\n        this.warn();\r\n        return;\r\n      }\r\n      var infor = [];\r\n      var hastime = false;\r\n      if (this.formInline.teacher!='' ){\r\n        infor.push('teacher');\r\n      } \r\n      if (this.formInline.name!='' ){\r\n        infor.push('name');\r\n      } \r\n      if (this.formInline.id!=''){\r\n        infor.push('id');\r\n        alert(\"1id\");\r\n      }\r\n      if ((this.formInline.weekday!=\"0\" && this.formInline.weekday!=\"\"  ) && \r\n          (this.formInline.section!=\"0\" && this.formInline.section!=\"\")){\r\n        infor.push('time');\r\n        hastime = true;\r\n      }\r\n      if(this.formInline.property!='' && this.formInline.property!='0'){\r\n        infor.push('property');\r\n      }\r\n      if(infor.length!=0){\r\n        this.tableData=[];\r\n        // 取出一节课，他不为空\r\n        for (var i=0; this.response[i+'']!=null ;++i){\r\n          // 判断是否查询老师，否的话进入下一层判断，是的话判断。\r\n          if(this.formInline.teacher=='' || this.response[i+\"\"]['teacher']==this.formInline.teacher){\r\n            // 判断是否查询id,\r\n            if(this.formInline.id=='' || this.response[i+\"\"]['id']==this.formInline.id){\r\n              if(this.formInline.property=='' || this.formInline.property=='0'  || this.response[i+\"\"]['property']==this.formInline.property){\r\n                if(this.formInline.name=='' || this.response[i+\"\"]['name'].includes(this.formInline.name)){\r\n                  if (!hastime || this.response[i+\"\"]['time'].includes(this.formInline.section+this.formInline.weekday)){\r\n                    this.tableData.push(this.response[i+'']);  \r\n                    this.end=i+1;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }else{\r\n        this.tableData = this.response;\r\n      }\r\n    },\r\n    // 页面初次加载时访问数据库\r\n    getCourses(){\r\n      getAllCourses().then(res =>{\r\n        this.response = res;\r\n        for (var i=this.begin; i<this.count && this.response[i+'']!=null;++i){\r\n          this.tableData.push(this.response[i+'']);\r\n          this.end=i+1;\r\n        }\r\n      })\r\n    }\r\n  },\r\n}\r\n</script>","import { render } from \"./CourseChose.vue?vue&type=template&id=eaab9f82\"\nimport script from \"./CourseChose.vue?vue&type=script&lang=ts\"\nexport * from \"./CourseChose.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}